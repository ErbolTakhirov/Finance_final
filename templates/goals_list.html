{% extends 'base.html' %}
{% block title %}Goals - SB FINANCE AI{% endblock %}

{% block content %}
<h1>Financial Goals</h1>

<div class="grid">
  <div class="col-6">
    <div class="card">
      <h3>Create Goal</h3>
      <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button class="btn" type="submit">Create Goal</button>
      </form>
    </div>
  </div>

  <div class="col-12">
    <div class="card">
      <h3>All Goals</h3>
      <table>
        <thead><tr><th>Title</th><th>Target</th><th>Progress</th><th>Deadline</th><th>Status</th><th></th></tr></thead>
        <tbody>
          {% for goal in goals %}
            <tr>
              <td><strong>{{ goal.title }}</strong></td>
              <td>{{ goal.target_amount }} KGS</td>
              <td>
                <div class="progress"><div style="width:{{ goal.progress_percent }}%"></div></div>
                <small class="muted">{{ goal.progress_percent }}% ({{ goal.current_saved }} KGS)</small>
              </td>
              <td>{{ goal.target_date }}</td>
              <td><span class="pill">{{ goal.status }}</span></td>
              <td><a href="{% url 'goal_detail_page' goal.id %}">View</a></td>
            </tr>
          {% empty %}
            <tr><td colspan="6" class="muted">No goals yet</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
